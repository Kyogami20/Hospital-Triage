<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<ScrollPane xmlns="http://javafx.com/javafx/17"
            xmlns:fx="http://javafx.com/fxml/1"
            fx:controller="com.meditriage.controller.DashboardController"
            fitToWidth="true"
            style="-fx-background-color: #f0f2f5; -fx-background: #f0f2f5;"
            hbarPolicy="NEVER">

    <VBox spacing="20" style="-fx-padding: 28 28 28 28; -fx-background-color: #f0f2f5;">

        <!-- Encabezado -->
        <VBox spacing="4">
            <Label text="Dashboard" styleClass="page-title"/>
            <Label text="Resumen en tiempo real del sistema de triaje" styleClass="page-subtitle"/>
        </VBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• KPI CARDS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <HBox spacing="16">
            <!-- Card 1: Cola -->
            <VBox styleClass="card" spacing="8" HBox.hgrow="ALWAYS" minWidth="160">
                <Label text="PACIENTES EN COLA" styleClass="card-title"/>
                <Label fx:id="lblQueueSize" text="0" styleClass="card-value"
                       style="-fx-text-fill: #4361ee;"/>
                <Label text="en espera" styleClass="card-subtitle"/>
            </VBox>

            <!-- Card 2: MÃ¡s urgente -->
            <VBox styleClass="card" spacing="8" HBox.hgrow="ALWAYS" minWidth="200">
                <Label text="MÃS URGENTE" styleClass="card-title"/>
                <Label fx:id="lblMostUrgent" text="â€”" styleClass="card-value"
                       style="-fx-font-size: 20px;"/>
                <Label fx:id="lblMostUrgentLevel" text="Cola vacÃ­a" styleClass="card-subtitle"/>
            </VBox>

            <!-- Card 3: Atendidos hoy -->
            <VBox styleClass="card" spacing="8" HBox.hgrow="ALWAYS" minWidth="160">
                <Label text="ATENDIDOS HOY" styleClass="card-title"/>
                <Label fx:id="lblAttendedToday" text="0" styleClass="card-value"
                       style="-fx-text-fill: #27ae60;"/>
                <Label text="pacientes" styleClass="card-subtitle"/>
            </VBox>

            <!-- Card 4: Espera promedio -->
            <VBox styleClass="card" spacing="8" HBox.hgrow="ALWAYS" minWidth="160">
                <Label text="ESPERA PROMEDIO HOY" styleClass="card-title"/>
                <Label fx:id="lblAvgWait" text="â€” min" styleClass="card-value"
                       style="-fx-text-fill: #e67e22;"/>
                <Label text="tiempo de espera" styleClass="card-subtitle"/>
            </VBox>
        </HBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• MÃ‰TRICAS ESTRUCTURAS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <VBox styleClass="card" spacing="10">
            <Label text="MÃ©tricas de Estructuras de Datos" styleClass="section-title"/>
            <HBox spacing="24">
                <Label fx:id="lblHashInfo"    text="Hash: â€”" style="-fx-text-fill: #636e72;"/>
                <Label fx:id="lblAvlInfo"     text="AVL: â€”"  style="-fx-text-fill: #636e72;"/>
                <Label fx:id="lblUndoInfo"    text="Undo: â€”" style="-fx-text-fill: #636e72;"/>
                <Label fx:id="lblHistoryInfo" text="Historial: â€”" style="-fx-text-fill: #636e72;"/>
            </HBox>
        </VBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• PANEL SIMULACIÃ“N â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <HBox spacing="16">
            <VBox styleClass="card" spacing="16" HBox.hgrow="ALWAYS">
                <Label text="Simulador de Llegada de Pacientes" styleClass="section-title"/>

                <HBox spacing="16" alignment="CENTER_LEFT">
                    <!-- Toggle ON/OFF -->
                    <ToggleButton fx:id="toggleSimulation"
                                  text="â–¶ Iniciar SimulaciÃ³n"
                                  styleClass="toggle-btn"
                                  onAction="#onToggleSimulation"
                                  style="-fx-background-color: #4361ee; -fx-text-fill: white;
                                         -fx-background-radius: 20; -fx-padding: 8 20;"/>

                    <!-- Intervalo -->
                    <Label text="Intervalo:" style="-fx-text-fill: #636e72;"/>
                    <Slider fx:id="sliderInterval" min="1" max="15" value="5"
                            prefWidth="180" showTickMarks="true" showTickLabels="true"
                            majorTickUnit="5" snapToTicks="false"/>
                    <Label fx:id="lblIntervalValue" text="5 s" style="-fx-font-weight: bold;"/>
                </HBox>

                <HBox spacing="16" alignment="CENTER_LEFT">
                    <!-- DistribuciÃ³n -->
                    <Label text="DistribuciÃ³n:" style="-fx-text-fill: #636e72;"/>
                    <ComboBox fx:id="cmbDistribution" prefWidth="160"/>

                    <!-- Caso crÃ­tico -->
                    <Button fx:id="btnCriticalCase"
                            text="ðŸš¨ Generar caso crÃ­tico (Nivel 1)"
                            styleClass="btn-danger"
                            onAction="#onGenerateCriticalCase"/>
                </HBox>
            </VBox>
        </HBox>

        <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• LOG DE EVENTOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
        <VBox styleClass="card" spacing="12">
            <Label text="Log de SimulaciÃ³n" styleClass="section-title"/>
            <TextArea fx:id="taSimLog" prefHeight="180"
                      editable="false" wrapText="true"
                      styleClass="log-area"/>
        </VBox>

    </VBox>
</ScrollPane>
