<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>

<VBox xmlns="http://javafx.com/javafx/17"
      xmlns:fx="http://javafx.com/fxml/1"
      fx:controller="com.meditriage.controller.SearchController"
      spacing="20"
      style="-fx-padding: 28; -fx-background-color: #f0f2f5;">

    <!-- Encabezado -->
    <VBox spacing="4">
        <Label text="Buscar Paciente" styleClass="page-title"/>
        <Label text="BÃºsqueda rÃ¡pida mediante Ãrboles AVL (O log n)" styleClass="page-subtitle"/>
    </VBox>

    <!-- Barra de bÃºsqueda -->
    <VBox styleClass="card" spacing="16">
        <Label text="Criterio de bÃºsqueda" styleClass="section-title"/>
        <HBox spacing="12" alignment="CENTER_LEFT">
            <TextField fx:id="txtSearch"
                       promptText="Introduce ID numÃ©rico o nombre del paciente..."
                       prefWidth="360"
                       styleClass="text-field"/>
            <Button text="ðŸ”¢ Buscar por ID"
                    fx:id="btnSearchById"
                    styleClass="btn-primary"
                    onAction="#onSearchById"/>
            <Button text="ðŸ”¤ Buscar por Nombre"
                    fx:id="btnSearchByName"
                    styleClass="btn-secondary"
                    onAction="#onSearchByName"/>
            <Button text="âœ• Limpiar"
                    styleClass="btn-secondary"
                    onAction="#onClearSearch"/>
        </HBox>
        <Label fx:id="lblSearchStatus" text="" style="-fx-text-fill: #636e72;"/>
    </VBox>

    <!-- Ficha de paciente (resultado Ãºnico) -->
    <VBox fx:id="vboxResult" styleClass="card" spacing="14" visible="false">
        <Label text="Ficha del Paciente" styleClass="section-title"/>
        <GridPane hgap="16" vgap="10">
            <Label text="ID:"          GridPane.columnIndex="0" GridPane.rowIndex="0" styleClass="field-label"/>
            <Label fx:id="lblResultId" GridPane.columnIndex="1" GridPane.rowIndex="0"/>

            <Label text="Nombre:"        GridPane.columnIndex="0" GridPane.rowIndex="1" styleClass="field-label"/>
            <Label fx:id="lblResultName" GridPane.columnIndex="1" GridPane.rowIndex="1"
                   style="-fx-font-size: 16px; -fx-font-weight: bold;"/>

            <Label text="Edad:"          GridPane.columnIndex="0" GridPane.rowIndex="2" styleClass="field-label"/>
            <Label fx:id="lblResultAge"  GridPane.columnIndex="1" GridPane.rowIndex="2"/>

            <Label text="Nivel:"           GridPane.columnIndex="0" GridPane.rowIndex="3" styleClass="field-label"/>
            <Label fx:id="lblResultLevel"  GridPane.columnIndex="1" GridPane.rowIndex="3"
                   styleClass="level-badge"/>

            <Label text="Estado:"          GridPane.columnIndex="2" GridPane.rowIndex="1" styleClass="field-label"/>
            <Label fx:id="lblResultStatus" GridPane.columnIndex="3" GridPane.rowIndex="1"
                   style="-fx-font-weight: bold;"/>

            <Label text="SÃ­ntomas:"           GridPane.columnIndex="0" GridPane.rowIndex="4" styleClass="field-label"/>
            <Label fx:id="lblResultSymptoms"  GridPane.columnIndex="1" GridPane.rowIndex="4"
                   GridPane.columnSpan="3" wrapText="true"/>

            <Label text="Llegada:"           GridPane.columnIndex="0" GridPane.rowIndex="5" styleClass="field-label"/>
            <Label fx:id="lblResultArrival"  GridPane.columnIndex="1" GridPane.rowIndex="5"/>

            <Label text="Atendido:"          GridPane.columnIndex="2" GridPane.rowIndex="5" styleClass="field-label"/>
            <Label fx:id="lblResultAttended" GridPane.columnIndex="3" GridPane.rowIndex="5"/>

            <Label text="Espera:"          GridPane.columnIndex="0" GridPane.rowIndex="6" styleClass="field-label"/>
            <Label fx:id="lblResultWait"   GridPane.columnIndex="1" GridPane.rowIndex="6"
                   style="-fx-font-weight: bold;"/>
        </GridPane>
    </VBox>

    <!-- Tabla de resultados mÃºltiples -->
    <TableView fx:id="tableResults" VBox.vgrow="ALWAYS" visible="false"
               style="-fx-background-color: white; -fx-background-radius: 12;">
        <columns>
            <TableColumn fx:id="colResId"     text="ID"       prefWidth="65"/>
            <TableColumn fx:id="colResName"   text="Nombre"   prefWidth="180"/>
            <TableColumn fx:id="colResAge"    text="Edad"     prefWidth="70"/>
            <TableColumn fx:id="colResLevel"  text="Nivel"    prefWidth="180"/>
            <TableColumn fx:id="colResStatus" text="Estado"   prefWidth="120"/>
        </columns>
        <columnResizePolicy>
            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY"/>
        </columnResizePolicy>
    </TableView>
</VBox>
